"0","air_id = ""air_ba937bf13d40fb24"""
"0","max_date <- max(air_visited$visit_date)"
"0","split_date <- max_date - test_len"
"0","visit_date = seq(min(air_visited$visit_date), max(air_visited$visit_date), 1)"
"0","all_visits <- tibble(visit_date)"
"0","foo <- air_visited %>% "
"0","  filter(air_store_id == air_id)"
"0","visits <- foo %>%"
"0","  right_join(all_visits, by=""visit_date"") %>%"
"0","  mutate(visitors = log1p(visitors)) %>%"
"0","  replace_na(list(visitors = median(log1p(foo$visitors)))) %>%"
"0","  rownames_to_column()"
"0","visits_train <- visits %>% filter(visit_date<=split_date)"
"0","visits_valid <- visits %>% filter(visit_date>split_date)"
"0","arima.fit <- auto.arima(tsclean(ts(visits_train$visitors, frequency = 7)), stepwise = FALSE, approximation = FALSE)"
"0","arima_visit <- arima.fit %>% forecast(h=test_len, level=c(50,95))"
"0","arima_visit %>% autoplot +"
"0","  geom_line(aes(as.integer(rowname)/7, visitors), data=visits_valid, color=""gray40"")"
