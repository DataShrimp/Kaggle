"0","visits_p <- foo %>%"
"0","  right_join(all_visits, by=""visit_date"") %>%"
"0","  mutate(visitors = log1p(visitors)) %>%"
"0","  rownames_to_column() %>%"
"0","  select(y = visitors, ds = visit_date)"
"0","visits_train_p <- visits_p %>% filter(ds <= split_date)"
"0","visits_valid_p <- visits_p %>% filter(ds > split_date)"
"0","proph <- prophet(visits_train_p, changepoint.prior.scale=0.5, yearly.seasonality=FALSE)"
"2","Disabling daily seasonality. Run prophet with daily.seasonality=TRUE to override this.
"
"1","Initial log joint probability = -7.65901"
"1","
"
"1","Optimization terminated normally: "
"1","
"
"1","  Convergence detected: relative gradient magnitude is below tolerance"
"1","
"
"0","future <- make_future_dataframe(proph, periods = test_len)"
"0","fcast <- predict(proph, future)"
"0","fcast %>%"
"0","  as.tibble() %>%"
"0","  mutate(ds = date(ds)) %>%"
"0","  ggplot(aes(ds, yhat)) + "
"0","  geom_ribbon(aes(x = ds, ymin = yhat_lower, ymax = yhat_upper), fill = ""light blue"") +"
"0","  geom_line(colour = ""blue"") +"
"0","  geom_line(data = visits_train_p, aes(ds, y), colour = ""black"") +"
"0","  geom_line(data = visits_valid_p, aes(ds, y), colour = ""grey50"")"
